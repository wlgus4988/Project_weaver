<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	  xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<link href="/css/styles.css" rel="stylesheet"/>
<header th:replace="fragments/menu :: menuFragment"></header>

<div layout:fragment="content" style="padding: 120px;">

	<div class="mt-2"></div>
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-md-6">
				<div class="card">
					<header class="card-header">
						<h4 class="card-title mt-2">사용자 등록</h4>
					</header>
					<article class="card-body">
						<form id="frm" name="frm" action="/user/userInsert/admin" method="post" onsubmit="return spaceTest()">
							<div class="form-group row">
								<label class="col-sm-3 col-form-label">아
									이 디</label>
								<div class="col-sm-9">
									<input name="username" type="text" class="form-control"
										id="username" placeholder="아이디를 입력하세요">
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-3 col-form-label">패
									스 워 드</label>
								<div class="col-sm-9">
									<input name="pw" type="password" class="form-control"
										id="pw" placeholder="비밀번호를 입력하세요">
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-3 col-form-label">이
									름</label>
								<div class="col-sm-9">
									<input name="name" type="text" class="form-control"
										id="name" placeholder="이름을 입력하세요">
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-3 col-form-label">이
									메 일</label>
								<div class="col-sm-9">
									<input name="email" type="email" class="form-control"
										id="email" placeholder="Email을 입력하세요">
								</div>
							</div>
							<div class="form-group row">
								<label  class="col-sm-3 col-form-label">권
									한</label>
								<div class="col-sm-9">
									<select style="width:215px" id="role"
											name="role">
										<option value="ROLE_MEMBER" selected="selected">ROLE_MEMBER</option>
										<option value="ROLE_ADMIN">ROLE_ADMIN</option>
									</select>
								</div>
							</div>
							<div class="form-group row">
								<div class="col-sm-6">
									<input type="submit" class="btn btn-primary" value="등록">
								</div>
								<div class="col-sm-6">
									<a href="/user/userList/admin" class="btn btn-primary">취소</a>
								</div>
							</div>
						</form>
					</article>
				</div>
			</div>
		</div>
	</div>
</div>
<script type = "text/javascript">

	var a = '[[${userList}]]'
	console.log(a);

	function spaceTest() {
		var username = document.getElementById("username").value;
		var pw = document.getElementById("pw").value;
		var name = document.getElementById("name").value;
		var email = document.getElementById("email").value;

		var a = '[[${userList}]]'
		console.log(a);

		if (!username || !pw || !name || !email) {
			alert('공백 없이 입력해주세요');
			return false;
		}
		if (a.includes(username) === true) {
			alert('이미 존재하는 아이디입니다');
			return false;
		}
		var reg_email = /^([0-9a-zA-Z_\.-]+)@([0-9a-zA-Z_-]+)(\.[0-9a-zA-Z_-]+){1,2}$/;
		if (!reg_email.test(email)) {
			alert('올바른 이메일을 입력해주세요');
			return false;
		}
		return true;
	}

</script>
</html>