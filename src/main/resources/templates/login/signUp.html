<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>JOIN</title>
    <link rel="stylesheet" href="css/google.css">
    <script src="https://code.jquery.com/jquery-3.6.0.slim.js" integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function() {
            var msg = "[[${msg}]]";
            console.log(msg);
            console.log('찍히나');
            if (msg != null && msg.length > 0) {
                alert(msg);
            }
        })
    </script>
</head>
<body>
<div class="box">
    <div class="logo">

    </div>
    <h2>Sign Up</h2>
    <p></p>
    <form action="/signUp" method="post" id="frm" name="frm" onsubmit="return spaceTest()">
        <div class="inputBox">
            <input type="text" name="username" id="username">
            <label>아이디</label>
        </div>
        <div class="inputBox">
            <input type="password" name="pw" id="pw">
            <label>비밀번호</label>
        </div>
        <div class="inputBox">
            <input type="text" name="name" id="name">
            <label>사용자 이름</label>
        </div>
        <div class="inputBox">
            <input type="email" name="email" id="email">
            <label>이메일</label>
        </div>
        <input type="submit" name="sign-up" value="Sign Up">
    </form>
    <a href="/">로그인</a>
</div>

</div>

</body>
<script type="text/javascript">

    function spaceTest() {
        var username = document.getElementById("username").value;
        var pw = document.getElementById("pw").value;
        var name = document.getElementById("name").value;
        var email = document.getElementById("email").value;

        var a = '[[${userList}]]'
        console.log(a);

        if (!username || !pw || !name || !email) {
            alert('공백 없이 입력해주세요');
            return false;
        }
        if (a.includes(username) === true) {
            alert('이미 존재하는 아이디입니다');
            return false;
        }
        var reg_email = /^([0-9a-zA-Z_\.-]+)@([0-9a-zA-Z_-]+)(\.[0-9a-zA-Z_-]+){1,2}$/;
        if (!reg_email.test(email)) {
            alert('올바른 이메일을 입력해주세요');
            return false;
        }
        return true;
    }
</script>
</html>